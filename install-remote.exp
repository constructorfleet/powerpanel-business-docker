#!/usr/bin/expect -f
#
# This Expect script was generated by autoexpect on Sat Feb 20 22:52:09 2021
# Expect and autoexpect were both written by Don Libes, NIST.
#
# Note that autoexpect does not guarantee a working script.  It
# necessarily has to guess about certain things.  Two reasons a script
# might fail are:
#
# 1) timing - A surprising number of programs (rn, ksh, zsh, telnet,
# etc.) and devices discard or ignore keystrokes that arrive "too
# quickly" after prompts.  If you find your new script hanging up at
# one spot, try adding a short sleep just before the previous send.
# Setting "force_conservative" to 1 (see below) makes Expect do this
# automatically - pausing briefly before sending each character.  This
# pacifies every program I know of.  The -c flag makes the script do
# this in the first place.  The -C flag allows you to define a
# character to toggle this mode off and on.

set force_conservative 0  ;# set to 1 to force conservative mode even if
			  ;# script wasn't run conservatively originally
if {$force_conservative} {
	set send_slow {1 .1}
	proc send {ignore arg} {
		sleep .1
		exp_send -s -- $arg
	}
}

#
# 2) differing output - Some programs produce different output each time
# they run.  The "date" command is an obvious example.  Another is
# ftp, if it produces throughput statistics at the end of a file
# transfer.  If this causes a problem, delete these patterns or replace
# them with wildcards.  An alternative is to use the -p flag (for
# "prompt") which makes Expect only look for the last line of output
# (i.e., the prompt).  The -P flag allows you to define a character to
# toggle this mode off and on.
#
# Read the man page for more info.
#
# -Don


set timeout -1
spawn ./ppb-linux-x86_64.sh
match_max 100000
expect -exact "Unpacking JRE ...\r\n
Starting Installer ...\r\n
\[?7hThis will install CyberPower PowerPanel Business on your computer.\r\n
OK \[o, Enter\], Cancel \[c\]\r\n
"
send -- "o\r\n"
expect -exact "o\r\n
Click Next to continue, or Cancel to exit Setup.\r\n
Please read the following License Agreement. You must accept the terms of\r\n
this agreement before continuing with the installation.\r\n
\r\n
CyberPower Software License Agreement\r\n
PLEASE READ THIS LICENSE AGREEMENT (\"LICENSE\") CAREFULLY BEFORE USING THIS\r\n
SOFTWARE. BY DOWNLOADING, INSTALLING, OR USING THIS SOFTWARE, YOU ACCEPT ALL\r\n
TERMS AND CONDITIOND OF THIE LICENSE AGREEMENT. IF YOU DO NOT AGREE TO THE\r\n
TERMS OF THIS LICENSE, YOU MUST DELETE OR DISABLE ANY COPY IN YOUR\r\n
POSSESSION OR CONTROL.\r\n
\r\n
1.	General.\r\n
a.	The term \"Software\" will include any upgrades, modified versions or\r\n
updates of the Software licensed to you by Cyber Power Systems, Inc. unless\r\n
such upgrades, modified versions or updates is accompanied by a separate\r\n
license in which case the terms of that license will govern.\r\n
b.	Title and intellectual property rights in and to any content displayed by\r\n
or accessed through the Software belongs to the respective content owner.\r\n
Such content may be protected by copyright or other intellectual property\r\n
laws and treaties, and may be subject to terms of use of the third party\r\n
providing such content. This License does not grant you any rights to use\r\n
such content.\r\n
\r\n
2.	Use of the Software. Subject to the terms of this License, you are\r\n
granted a limited nontransferable license to install and use this Software\r\n
on any compatible computer or device that you own or control.\r\n
\r\n
\[Enter\]\r\n
"
send -- "\r\n"
expect -exact "\r\n
3.	License Grant. You are hereby granted a personal, non-transferable and\r\n
non-sublicenseable, non-exclusive license to use the Software. Except for\r\n
the license aforesaid, you are granted no other rights or licenses, by\r\n
implication, or estoppel, or otherwise, under any patents or other\r\n
intellectual property rights.\r\n
\r\n
4.	Restrictions.\r\n
a.	You agree not to: (i) remove any copyright, trademark or other\r\n
proprietary notices from any portion of the Software; (ii) copy, reproduce,\r\n
modify, adapt, translate, reverse engineer, decompile, disassemble, decrypt\r\n
or create derivative works of the Software or otherwise attempt to discover\r\n
the source code of the Software or any part thereof; (iv) link to, mirror or\r\n
frame any portion of the Software; (v) cause or launch any programs or\r\n
scripts for the purpose of scraping, indexing, surveying, or otherwise data\r\n
mining any portion of the Software or unduly burdening or hindering the\r\n
operation and/or functionality of any aspect of the Software; or (vi)\r\n
attempt to gain unauthorized access to or impair any aspect of the Software\r\n
or its related systems or network; (vii) distribute or make the Software\r\n
available over a network where it could be used by multiple devices at the\r\n
same time; and (viii) publish, rent, lease, lend, sell, redistribute or\r\n
sublicense the Software.\r\n
b.	The Software was designed for systems that do not require fail-safe\r\n
performance. You may not use the Software in any device or system in which a\r\n
\[Enter\]\r\n
"
send -- "\r\n"
expect -exact "\r\n
malfunction of the Software would result in foreseeable risk of injury or\r\n
death to any person. This includes operation of nuclear facilities, aircraft\r\n
navigation or communication systems and air traffic control.\r\n
c.	Any attempt to do so is a violation of License. If you breach this\r\n
restriction, you may be subject to prosecution and damages.\r\n
\r\n
5.	Consent to Use of Data. You agree that Cyber Power Systems, Inc. and its\r\n
subsidiaries may collect and use technical and related information,\r\n
including but not limited to technical information about your computer,\r\n
mobile device, system and application software, and peripherals, that is\r\n
gathered periodically to facilitate the provision of Software updates,\r\n
product support and other Softwares to you (if any) related to the Software.\r\n
Cyber Power Systems, Inc. may use this information, as long as it is in a\r\n
form that does not personally identify you, to improve our products or to\r\n
provide Softwares or technologies to you. At all times your information will\r\n
be treated in accordance with Cyber Power Systems, Inc. Privacy Policy,\r\n
which can be viewed on our website.\r\n
\r\n
6.	Intellectual Property Rights. The Software is owned by Cyber Power\r\n
Systems, Inc. and its suppliers, and its structure, organization and code\r\n
are the valuable trade secrets of Cyber Power Systems, Inc. and its\r\n
suppliers. All title and intellectual property rights in and to any third\r\n
party content that is contained in the Software or may be accessed through\r\n
\[Enter\]\r\n
"
send -- "\r\n"
expect -exact "\r\n
the use of the Software, is the property of the respective content owners\r\n
and may be protected by applicable intellectual property related laws and\r\n
treaties.\r\n
\r\n
7.	Disclaimer. The Software is being provided to you AS IS and Cyber Power\r\n
Systems, Inc. , its subsidiaries and their supplier makes no warranty as to\r\n
its use or performance. THE ENTIRE RISK OF USE AND PERFORMANCE REMAINS WITH\r\n
YOU. CYBER POWER SYSTEMS, INC., ITS SUBSIDIARIES AND THEIR SUPPLIERS DO NOT\r\n
AND CANNOT WARRANT THE PERFORMANCE OR RESULTS YOU MAY OBTAIN BY USING THE\r\n
SOFTWARE. CYBER POWER SYSTEMS, INC., ITS SUBSIDIARIES AND THEIR SUPPLIERS\r\n
MAKE NO WARRANTIES, EXPRESS OR IMPLIED, AS TO NONINFRINGEMENT OF THIRD PARTY\r\n
RIGHTS, MERCHANTABILITY, OR FITNESS FOR ANY PARTICULAR PURPOSE. IN ADDITION,\r\n
CYBER POWER SYSTEMS, INC., ITS SUBSIDIARIES AND THEIR SUPPLIERS MAKES NO\r\n
REPRESENTATION, WARRANTY, OR GUARANTEE REGARDING THE RELIABILITY,\r\n
TIMELINESS, QUALITY, SUITABILITY, OR AVAILABILITY OF THE SOFTWARES OR ANY\r\n
SOFTWARES OR GOODS REQUESTED THROUGH THE USE OF THE SOFTWARES, OR THAT THE\r\n
SOFTWARES WILL BE UNINTERRUPTED OR ERROR-FREE. YOU FURTHER ACKNOWLEDGE THAT\r\n
THE SOFTWARE ARE NOT INTENDED OR SUITABLE FOR USE IN SITUATIONS OR\r\n
ENVIRONMENTS WHERE THE FAILURE OR TIME DELAYS OF, OR ERRORS OR INACCURACIES\r\n
IN THE CONTENT, DATA OR INFORMATIONPROVIDED BY, THE SOFTWARE COULD LEAD TO\r\n
DEATH, PERSONAL INJURY, OR SEVERE PHYSICAL OR ENVIRONMENTAL DAMAGE,\r\n
INCLUDING WITHOUT LIMITATION THE OPERATION OF NUCLEAR FACILITIES, AIRCRAFT\r\n
NAVIGATION OR COMMUNICATION SYSTEMS, AIR TRAFFIC CONTROL, LIFE SUPPORT OR\r\n
\[Enter\]\r\n
"
send -- "\r\n"
expect -exact "\r\n
WEAPONS SYSTEMS.\r\n
\r\n
8.	Limitation of Liability. IN NO EVENT WILL CYBER POWER SYSTEMS, INC., ITS\r\n
SUBSIDIARIES AND THEIR SUPPLIERS OR ANY OF THEIR RESPECTIVE OFFICERS,\r\n
DIRECTORS, EMPLOYEES, AGENTS OR AFFILIATES BE LIABLE TO YOU FOR ANY\r\n
CONSEQUENTIAL, INCIDENTAL, SPECIAL OR PUNITIVE DAMAGES, INCLUDING BUT NOT\r\n
LIMITED TO ANY LOST PROFITS, LOST DATA, OR COST TO PROCURE SUBSTITUTE\r\n
SOFTWARES, EVEN IF CYBER POWER SYSTEMS, INC., ITS SUBSIDIARIES AND THEIR\r\n
SUPPLIERS HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES, OR FOR ANY\r\n
CLAIM BY ANY THIRD PARTY. Cyber Power Systems, Inc. ,its subsidiaries and\r\n
their suppliers shall not be responsible for any incorrect or inaccurate\r\n
information, caused by the internet user or for any of the equipment or\r\n
programming associated with or utilized in this Software, or for any\r\n
technical error, or any combination thereof that may occur in the course of\r\n
the administration of this Software including any omission, interruption,\r\n
deletion, defect, delay in operation or transmission, communications line or\r\n
telephone, mobile or satellite network failure, technical problems or\r\n
traffic congestion on the internet or website, software failure, theft or\r\n
destruction or unauthorized access to or alteration of entries and any\r\n
injury or damage to your computer related to or resulting from participating\r\n
in or downloading any materials in this Software.\r\n
Some states or jurisdictions do not allow the exclusion or limitation of\r\n
incidental, consequential or special damages, or the exclusion of implied\r\n
\[Enter\]\r\n
"
send -- "\r\n"
expect -exact "\r\n
warranties or limitations on how long an implied warranty may last, so the\r\n
above limitations may not apply to you.\r\n
\r\n
9.	Compliance with Law; Export Control. You will comply with all national\r\n
and international laws, rules and regulations that apply to the Software and\r\n
your use of the Software as well as end-user, end-use and destination\r\n
restrictions issued by the United States or other governments. You agree\r\n
that the Software will not be shipped, transferred, exported or re-exported\r\n
into any country or used in any manner prohibited by the United States\r\n
Export Administration Act or any other export laws, restrictions or\r\n
regulations. In particular, but without limitation, the Software may not be\r\n
exported or re-exported (a) into any U.S. embargoed countries or (b) to\r\n
anyone on the U.S. Treasury Department's list of Specially Designated\r\n
Nationals or the U.S. Department of Commerce Denied Person's List or Entity\r\n
List. By using the Software, you represent and warrant that you are not\r\n
located in any such country or on any such list. You also agree that you\r\n
will not use the Software for any purposes prohibited by United States law\r\n
and the applicable laws you located, including, without limitation, the\r\n
development, design, manufacture or production of missiles or nuclear,\r\n
chemical or biological weapons.\r\n
\r\n
10.	Trademark. This License does not grant to you any rights in connection\r\n
with any trademarks or service marks of Cyber Power Systems, Inc. or of its\r\n
\[Enter\]\r\n
"
send -- "\r\n"
expect -exact "\r\n
licensors or suppliers.\r\n
\r\n
11.	Termination. This License is effective until terminated. Your rights\r\n
under this License will terminate automatically or otherwise cease to be\r\n
effective without notice from Cyber Power Systems, Inc. if you fail to\r\n
comply with any term(s) of this License. Upon the termination of this\r\n
License, you shall cease all use of the Software and destroy all copies,\r\n
full or partial, of the Software. Sections 5, 6, 7, 8, 9, 10, 12 and 13 of\r\n
this License shall survive any such termination.\r\n
\r\n
12.	Governing Law and General Provisions.\r\n
This License will not be governed by the United Nations Convention on\r\n
Contracts for the International Sale of Goods, the application of which is\r\n
expressly excluded.\r\n
a.	North and South America. If you acquired the Software in North or South\r\n
America, this License will be governed by the laws of the State of\r\n
Minnesota, U.S.A., excluding the application of its conflicts of law rules.\r\n
You irrevocably agree to the exclusive jurisdiction and venue of the courts\r\n
in Minneapolis, Minnesota, U.S.A. for any disputes arising out of or in\r\n
connection with this License. If applicable law prevents jurisdiction and\r\n
venue in Minneapolis and you live outside the United States, then to the\r\n
maximum extent permitted by applicable law you irrevocably agree that for\r\n
any disputes arising out of or relating to this License exclusive\r\n
\[Enter\]\r\n
"
send -- "\r\n"
expect -exact "\r\n
jurisdiction and venue will be in the courts in the largest city in your\r\n
country within 200 miles of where you live.\r\n
b.	Europe. If you acquired the Software in Europe, this License will be\r\n
governed by the laws of France, excluding the application of its conflicts\r\n
of law rules. You irrevocably agree to the exclusive jurisdiction and venue\r\n
of the courts in Paris, France for any disputes arising out of or in\r\n
connection with this License. If applicable law prevents jurisdiction and\r\n
venue in Pairs, then to the maximum extent permitted by applicable law you\r\n
irrevocably agree that for any disputes arising out of or relating to this\r\n
License exclusive jurisdiction and venue will be in the courts in the\r\n
largest city in your country within 200 miles of where you live.\r\n
c.	Outside the United States and Europe. If you acquired the Software in any\r\n
country other than in North America, South America or Europe, this License\r\n
will be governed by the laws of Taiwan and the court of first instance will\r\n
be Taiwan Shilin District Court, excluding the application of its conflicts\r\n
of law rules. If applicable law prevents the designation of the Taiwan\r\n
Shilin District Court as the court of first instance, then to the maximum\r\n
extent permitted by applicable law you irrevocably agree that for any\r\n
disputes arising out of or relating to this License exclusive jurisdiction\r\n
and venue will be in the courts in the largest city in your country within\r\n
200 miles of where you live.\r\n
\r\n
13.	 Others.\r\n
\[Enter\]\r\n
"
send -- "\r\n"
expect -exact "\r\n
a.	If any part of this License is found void and unenforceable under\r\n
applicable laws, it will not affect the validity of the rest of the License,\r\n
which shall remain valid and enforceable according to its terms. This\r\n
License shall automatically terminate upon failure by you to comply with its\r\n
terms. This License may only be modified in writing signed by an authorized\r\n
officer of Cyber Power Systems, Inc.\r\n
b.	These terms expressly supersede prior agreements or arrangements with\r\n
you. We may amend the Terms from time to time. Amendments will be effective\r\n
upon Cyber Power Systems, Inc. posting of such updated terms at this\r\n
location or in the amended policies or supplemental terms on the applicable\r\n
Software(s). Tour continued access or use of the Software after such posting\r\n
confirms your consent to be bound by the Terms, as amended.\r\n
\r\n
I accept the agreement\r\n
Yes \[1\], No \[2\]\r\n
"
send -- "1\r\n"
expect -exact "1\r\n
Select the folder where you would like CyberPower PowerPanel Business to be\r\n
installed, then click Next.\r\n
Where should CyberPower PowerPanel Business be installed?\r\n
\[/usr/local/PPB\]\r\n
"
send -- "/usr/local/ppbe\r\n"
expect -exact "/usr/local/ppbe\r\n
Which components should be installed?\r\n
1: Local\r\n
2: Remote\r\n
Please enter a comma-separated list of the selected values or \[Enter\] for the default selection:\r\n
"
send -- "2\r\n"
expect eof
